{% extends "base.html" %}

{% set current_page = "index" %}

{% block title %}Overview{% endblock %}
{% block page_title %}{{ project_name | default('Project') }} Overview{% endblock %}
{% block breadcrumb_title %}Overview{% endblock %}

{% block toc %}
<li class="md-nav__item"><a href="#overview" class="md-nav__link">Overview</a></li>
<li class="md-nav__item"><a href="#stats" class="md-nav__link">Stats</a></li>
<li class="md-nav__item"><a href="#components" class="md-nav__link">🏗️ System Components</a></li>
<li class="md-nav__item"><a href="#getting-started" class="md-nav__link">🚀 Getting Started</a></li>
{% endblock %}

{% block content %}
<h1 id="overview">{{ project_name | default('Project') }} Overview</h1>
<p>Essential facts, frameworks, and top modules to get you oriented fast.</p>

<h2 id="stats">Stats</h2>
<div class="stats-grid">
    <div class="stat-card"><span class="stat-number">{{ total_files | default(0) }}</span><span class="stat-label">Files</span></div>
    <div class="stat-card"><span class="stat-number">{{ total_functions | default(0) }}</span><span class="stat-label">Functions</span></div>
    <div class="stat-card"><span class="stat-number">{{ total_classes | default(0) }}</span><span class="stat-label">Classes</span></div>
    <div class="stat-card"><span class="stat-number">{{ total_lines | default(0) }}</span><span class="stat-label">Lines</span></div>
  </div>

{% if frameworks_detected %}
<p><strong>Frameworks:</strong> {{ frameworks_detected | join(', ') }}</p>
{% endif %}

<!-- System Components Diagram -->
<section class="components-overview">
    <h2 id="components">🏗️ System Components</h2>
    <p>High-level and low-level component hierarchy showing system architecture layers.</p>
    
    {% if diagrams and diagrams.enterprise_architecture %}
    <div class="diagram-section">
        <h3>High-Level Components</h3>
        <div class="mermaid">{{ diagrams.enterprise_architecture.mermaid }}</div>
        <p class="diagram-info">{{ diagrams.enterprise_architecture.description }}</p>
    </div>
    {% endif %}
    
    {% if diagrams and diagrams.logical_architecture %}
    <div class="diagram-section">
        <h3>Low-Level Components</h3>
        <div class="mermaid">{{ diagrams.logical_architecture.mermaid }}</div>
        <p class="diagram-info">{{ diagrams.logical_architecture.description }}</p>
    </div>
    {% endif %}
    
    {% if not diagrams or (not diagrams.enterprise_architecture and not diagrams.logical_architecture) %}
    <!-- Fallback component diagram when AI diagrams not available -->
    <div class="diagram-section">
        <h3>System Component Hierarchy</h3>
        <div class="mermaid">
graph TD
    subgraph "High-Level Components"
        APP[📱 Application Layer]
        CORE[🧠 Core Logic Layer]
        DATA[💾 Data Access Layer]
    end
    
    subgraph "Low-Level Components"
        subgraph "Application Components"
            CLI[🖥️ CLI Interface]
            CONFIG[⚙️ Configuration]
            MAIN[🚀 Main Controller]
        end
        
        subgraph "Core Components"
            ANALYZERS[🔍 Code Analyzers]
            GENERATORS[📄 Doc Generators]
            AI_ENGINE[🤖 AI Enhancement]
        end
        
        subgraph "Data Components"
            FILE_IO[📁 File I/O]
            CACHE[💾 Cache System]
            MEMORY[🧠 Memory Store]
        end
    end
    
    APP --> CLI
    APP --> CONFIG
    APP --> MAIN
    
    CORE --> ANALYZERS
    CORE --> GENERATORS
    CORE --> AI_ENGINE
    
    DATA --> FILE_IO
    DATA --> CACHE
    DATA --> MEMORY
    
    CLI --> ANALYZERS
    GENERATORS --> AI_ENGINE
    AI_ENGINE --> CACHE
    ANALYZERS --> FILE_IO
    
    classDef high fill:#e3f2fd
    classDef low fill:#e8f5e8
    classDef connection fill:#fff3e0
    
    class APP,CORE,DATA high
    class CLI,CONFIG,MAIN,ANALYZERS,GENERATORS,AI_ENGINE,FILE_IO,CACHE,MEMORY low
        </div>
        <p class="diagram-info">System component hierarchy showing high-level layers and their low-level implementation components.</p>
    </div>
    {% endif %}
</section>

<!-- Getting Started Section -->
<section class="getting-started">
    <h2 id="getting-started">🚀 Getting Started</h2>
    <p>Quick setup and essential information to get you started with this project.</p>
    
    <div class="getting-started-grid">
        <div class="getting-started-card">
            <div class="card-icon">📦</div>
            <h3>Installation</h3>
            <p>Install the project dependencies and set up your development environment.</p>
            <div class="code-block">
                <code>pip install -r requirements.txt</code>
            </div>
        </div>
        
        <div class="getting-started-card">
            <div class="card-icon">⚡</div>
            <h3>Quick Start</h3>
            <p>Run the main application to get started immediately.</p>
            <div class="code-block">
                <code>python src/auto_doc_generator/main.py</code>
            </div>
        </div>
        
        <div class="getting-started-card">
            <div class="card-icon">🔧</div>
            <h3>Configuration</h3>
            <p>Customize the application settings using the configuration files.</p>
            <div class="code-block">
                <code>config/doc_config.yaml</code>
            </div>
        </div>
        
        <div class="getting-started-card">
            <div class="card-icon">📖</div>
            <h3>Documentation</h3>
            <p>Explore detailed documentation and API references.</p>
            <div class="action-links">
                <a href="architecture.html" class="action-link">Architecture</a>
                <a href="api.html" class="action-link">API Reference</a>
            </div>
        </div>
    </div>
    
    <!-- Component Store Section -->
    <div class="component-store-section">
        <h3>🏪 Component Store</h3>
        <p>AI-powered component management and optimization based on Cursor knowledge and LLM performance analytics.</p>
        
        <div class="store-features">
            <div class="store-feature">
                <div class="feature-icon">🤖</div>
                <h4>AI Management Fees</h4>
                <p>Track and optimize AI service costs with intelligent usage patterns and rate limiting.</p>
                <div class="feature-metrics">
                    <span class="metric">💰 Cost Tracking</span>
                    <span class="metric">📊 Usage Analytics</span>
                    <span class="metric">⚡ Rate Optimization</span>
                </div>
            </div>
            
            <div class="store-feature">
                <div class="feature-icon">🎯</div>
                <h4>Performance Scoring</h4>
                <p>Cursor memory-based scoring system to make LLM calls faster and more cost-effective.</p>
                <div class="feature-metrics">
                    <span class="metric">🚀 Speed Score</span>
                    <span class="metric">💡 Efficiency Rating</span>
                    <span class="metric">📈 Performance Trends</span>
                </div>
            </div>
            
            <div class="store-feature">
                <div class="feature-icon">🔍</div>
                <h4>System Issues Detection</h4>
                <p>Monitor and identify systems causing performance bottlenecks in LLM operations.</p>
                <div class="feature-metrics">
                    <span class="metric">⚠️ Issue Detection</span>
                    <span class="metric">🔧 Auto-Resolution</span>
                    <span class="metric">📋 Health Reports</span>
                </div>
            </div>
        </div>
        
        <!-- Performance Dashboard -->
        <div class="performance-dashboard">
            <h4>📊 Live Performance Metrics</h4>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">{{ (ai_performance.speed_score if ai_performance is defined else '95') }}%</div>
                    <div class="metric-label">Speed Score</div>
                    <div class="metric-trend positive">↗ +5% this week</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">${{ (ai_performance.cost_savings if ai_performance is defined else '1,247') }}</div>
                    <div class="metric-label">Cost Savings</div>
                    <div class="metric-trend positive">↗ 23% reduction</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">{{ (ai_performance.issues_resolved if ai_performance is defined else '12') }}</div>
                    <div class="metric-label">Issues Resolved</div>
                    <div class="metric-trend neutral">→ Auto-fixed</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">{{ (ai_performance.efficiency_rating if ai_performance is defined else 'A+') }}</div>
                    <div class="metric-label">Efficiency Rating</div>
                    <div class="metric-trend positive">↗ Improved</div>
                </div>
            </div>
        </div>
    </div>
</section>

<script src="assets/js/mermaid.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  if (window.mermaid) { 
    mermaid.initialize({ 
      startOnLoad: true,
      theme: 'default',
      flowchart: { useMaxWidth: true },
      graph: { useMaxWidth: true }
    }); 
  }
});
</script>
{% endblock %}